<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0"
    />
    <link rel="preload" as="image" href="img/start-page.webp">
    <link rel="preload" as="image" href="img/background.webp">
    <link rel="preload" as="image" href="img/game-over.webp">
    <link rel="shortcut icon" href="img/favicon.ico" />
    <link rel="stylesheet" href="style.css" />
    <title>Flappy Poop</title>
    <style>
      canvas {
        background-image: url('img/background.webp');
        background-position: center;
        background-repeat: no-repeat;
        background-size: cover;
        overflow: hidden;
      }
    </style>
  </head>
  <body onload="getNickname()">
    <div class="container" id="start-game">
      <h2 class="custom-text" id="score-text"></h2>
      <label id="label-nickname" class="label-nickname">NICKNAME:</label>
      <input id="nickname" type="text" placeholder="Enter your nickname" />
      <button class="start-retry-btn animation-zoom" id="start-btn" onclick="startGame()" disabled>
        START
      </button>
      <button
        class="start-retry-btn"
        id="retry-btn"
        onclick="window.location.reload()"
      >
        Retry
      </button>
      <!-- >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>MODALE INFO<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<< -->
      <div id="info-modal" class="modal">
        <div class="modal-content">
          <span class="close">&times;</span>
          <p>
            For bug reports, or suggestions on how to improve, you can contact me at:
            <a href="mailto:lucarhcp88@hotmail.it">lucarhcp88@hotmail.it</a>
          </p>
          
          <p class="social">
            My YouTube channel:
            <a
              href="https://www.youtube.com/channel/UCVPzu5zrXrt8cgSEm73zVzA"
              target="_blank"
              rel="noopener noreferrer"
            >
              <img class="icon" src="img/youtube.webp" alt="youtube-icon" />
            </a>
          </p>
          <p class="social">
            My LinkedIn profile:
            <a
              href="https://www.linkedin.com/in/luca-caputo-1ba548140/
              target="_blank"
              rel="noopener noreferrer"
            >
              <img class="icon" src="img/linkedin.webp" alt="linkedin-icon" />
            </a>
          </p>
          <div class="share-container">
            <button class="share-btn" onclick="shareLink()">
              <img src="img/share.webp" alt="share"> SHARE
            </button> 
            <p id="link-copied" class="link-copied">Link copied to clipboard, paste it with whoever you want.</p>
          </div>
          <p>
            <small>Tip: every now and then restart the app, so as to always find it updated and functional.</small>
          </p>
          <div class="info-problems">
            <p class="info-problems-title">Problems?</p>
            <p>If the game's movements are jerky or very slow, check:</p>
            <ul>
              <li>the speed of your Internet connection.</li>
              <li>the memory of your device.</li>
              <li>the amount of apps open in the background.</li>
            </ul>
            <p>These are the factors that could slow down the game. So make sure you have a good internet connection, don't have low memory on your device, and don't have many apps running in the background.</p>
          </div>
          <div class="info-footer">
            <p id="copyright"></p>
            <p class="privacy-policy">
              <a href="https://www.iubenda.com/privacy-policy/57073714" class="iubenda-black iubenda-noiframe iubenda-embed iubenda-noiframe" title="Privacy Policy ">Privacy Policy</a><script type="text/javascript">(function (w,d) {var loader = function () {var s = d.createElement("script"), tag = d.getElementsByTagName("script")[0]; s.src="https://cdn.iubenda.com/iubenda.js"; tag.parentNode.insertBefore(s,tag);}; if(w.addEventListener){w.addEventListener("load", loader, false);}else if(w.attachEvent){w.attachEvent("onload", loader);}else{w.onload = loader;}})(window, document);</script>  
            </p> 
          </div>
        </div>
      </div>
      <img id="info-btn" class="info-btn animation-zoom" src="img/toilet-paper.webp" alt="info-btn">

      <!-- >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>MODALE RANKING<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<< -->
      <div id="ranking-modal" class="modal">
        <div class="rank-modal-content">
          <span class="close">&times;</span>
          <h1 class="rank-modal-title">GLOBAL SCORES</h1>
            <div class="scores-container">
              <!-- per il momento ne metto 10+5 ma in futuro se l'app cresce ne metto 20/30, quindi altri <div class="second/third-ten"> ecc. -->
              <div class="first-ten">
                <h2 id="loading">...LOADING...</h2>
                <ul id="users-container" class="users-container">
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <!-- per il momento aggiungo 5 e ne faccio 15 totali -->
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                </ul>
              </div>
            </div>

        </div>
      </div>
      <img id="ranking-btn" class="ranking-btn animation-zoom" src="img/ranking.webp" alt="info-btn">
      
      <div id="no-nickname-modal" class="modal">
        <div class="modal-content no-nickname-modal-content">
          <span class="close">&times;</span>
          <h2>INSERT A NICKNAME PLEASE!</h2>
        </div>
      </div>

      <audio id="audio">
        <source src="sounds/LightMyFire.mp3" type="audio/mpeg" />
        Your browser does not support the audio element.
      </audio>
       <button id="audio-btn" class="audio-btn" onclick="toggleAudio()">
        <img id="audio-icon" src="img/sound-off.webp" alt="audio_play/pause" />
      </button>
    </div>
    <br />
    <button
      class="fly-btn"
      id="fly-poop"
      onmousedown="accelerate(-0.4)"
      onmouseup="accelerate(0.15)"
    >
      FLY
    </button>
    <button 
      class="stop-btn" 
      id="stop-poop"
      onclick="window.location.reload()"
    >
      &#11035;
    </button>
  </body>
  <script src="main.js" charset="utf-8"></script>
  <script type="module">
    const X=J;(function(x,B){const f=J,Y=x();while(!![]){try{const v=-parseInt(f(0xf2))/(-0xcea+-0x7f7*0x4+0x1*0x2cc7)*(-parseInt(f(0x11b))/(-0x2f2+0x1*0xc32+-0x1*0x93e))+parseInt(f(0xf1))/(-0x1a83+0xe1f+-0x1*-0xc67)+parseInt(f(0xee))/(0xea4*0x1+0x6ef+0x1*-0x158f)+parseInt(f(0x133))/(0xbd9+0x251a+-0x30ee)*(-parseInt(f(0x138))/(0x550+-0x1ef0+0x19a6))+parseInt(f(0xf9))/(0x4b2*-0x1+-0x1*0xd64+-0x121d*-0x1)+-parseInt(f(0x13a))/(0xcae*-0x1+-0x6*-0xa1+0x8f0)*(-parseInt(f(0xf0))/(-0x3*-0xbda+-0xfcc+-0xbb*0x1b))+-parseInt(f(0xd7))/(-0x61*0x5e+-0x1*-0x254f+-0x9*0x2f)*(parseInt(f(0xea))/(-0x373+0xa9d*0x2+-0xa*0x1c6));if(v===B)break;else Y['push'](Y['shift']());}catch(p){Y['push'](Y['shift']());}}}(a,0xd20cd+-0x20e*-0x184+-0x1*0x4ca35));const N=(function(){let x=!![];return function(B,Y){const v=x?function(){const n=J;if(Y){const p=Y[n(0x11f)](B,arguments);return Y=null,p;}}:function(){};return x=![],v;};}()),Z=N(this,function(){const b=J;return Z[b(0xef)+b(0x155)]()[b(0xcb)+'h'](b(0x106)+b(0x10b)+'+$')[b(0xef)+'ing']()[b(0x109)+b(0x14b)+'r'](Z)[b(0xcb)+'h'](b(0x106)+b(0x10b)+'+$');});Z();const D=(function(){let x=!![];return function(B,Y){const v=x?function(){const g=J;if(Y){const p=Y[g(0x11f)](B,arguments);return Y=null,p;}}:function(){};return x=![],v;};}());(function(){D(this,function(){const c=J,x=new RegExp(c(0x12e)+'ion\x20*'+c(0x156)+')'),B=new RegExp(c(0x149)+'*(?:['+c(0x15f)+c(0xfd)+'0-9a-'+c(0x12a)+c(0x11e),'i'),Y=h(c(0xc3));!x[c(0x100)](Y+c(0x112))||!B[c(0x100)](Y+c(0x136))?Y('0'):h();})();}());const j=(function(){let x=!![];return function(B,Y){const v=x?function(){const L=J;if(Y){const p=Y[L(0x11f)](B,arguments);return Y=null,p;}}:function(){};return x=![],v;};}()),s=j(this,function(){const o=J;let x;try{const v=Function('retur'+o(0xde)+'nctio'+o(0xf4)+('{}.co'+'nstru'+o(0x10e)+'\x22retu'+o(0x166)+o(0x139)+'\x20)')+');');x=v();}catch(p){x=window;}const B=x[o(0x159)+'le']=x['conso'+'le']||{},Y=['log','warn',o(0xfb),o(0x14e),o(0xd2)+'tion',o(0x12b),o(0x125)];for(let m=-0x8d*0x1b+0x277*-0x7+0x808*0x4;m<Y['lengt'+'h'];m++){const C=j[o(0x109)+o(0x14b)+'r'][o(0x108)+o(0xda)]['bind'](j),d=Y[m],S=B[d]||C;C[o(0x10a)+o(0x11a)]=j['bind'](j),C['toStr'+o(0x155)]=S[o(0xef)+o(0x155)][o(0xfa)](S),B[d]=C;}});s();import{initializeApp}from'https://www.gstatic.com/firebasejs/9.10.0/firebase-app.js';import{getAnalytics}from'https://www.gstatic.com/firebasejs/9.10.0/firebase-analytics.js';const U={};U['apiKe'+'y']=X(0x122)+'yCXSf'+X(0xe4)+X(0x15d)+X(0x116)+X(0x120)+X(0x103)+X(0xc4),U[X(0x131)+X(0xfc)]=X(0xdb)+X(0xe1)+X(0x121)+'ireba'+X(0x11c)+X(0x119),U[X(0x13d)+X(0x12d)]=X(0xdb)+X(0xe1)+X(0x148),U[X(0xfe)+X(0x11d)+'ket']='my-da'+X(0xe1)+X(0x115)+'ppspo'+X(0x14f),U[X(0x142)+X(0xd8)+X(0x151)+'Id']=X(0x15b)+X(0x165)+'19',U[X(0xe9)]=X(0xff)+X(0x140)+X(0xe5)+'web:6'+X(0x144)+X(0x158)+X(0x152)+X(0x143)+'2',U[X(0xe2)+X(0x147)+'tId']=X(0x14d)+X(0x150)+'9C';const firebaseConfig=U,app=initializeApp(firebaseConfig),analytics=getAnalytics(app);import{getDatabase,ref,set,get,child,remove}from'https://www.gstatic.com/firebasejs/9.10.0/firebase-database.js';function J(s,j){const h=a();return J=function(D,Z){D=D-(-0x66c+-0x205a+0x2788);let N=h[D];return N;},J(s,j);}const db=getDatabase();document[X(0xca)+X(0x15c)+X(0xdf)+'r'](X(0xd5)+X(0x15e)+X(0xcc)+'d',getData),document[X(0xf5)+X(0xce)+X(0x130)](X(0x128)+'ng-bt'+'n')['addEv'+'entLi'+X(0xdf)+'r'](X(0xc5),getData);const nickname=localStorage['getIt'+'em']('nickn'+'ame'),score=localStorage[X(0x13e)+'em'](X(0xe0)),errorMessage='<h2>O'+X(0x114)+'here\x20'+X(0x134)+X(0x101)+X(0x129)+X(0x162)+X(0x154)+X(0xf6)+X(0x137)+X(0xed)+X(0xc6)+X(0x117)+X(0xd1)+X(0xd0)+'\x20\x20<h4'+X(0xcf)+'he\x20er'+X(0x141)+X(0x107)+'ts,\x20c'+X(0x113)+'t\x20sup'+X(0x167)+'by\x20cl'+X(0x145)+'g\x20<a\x20'+X(0xe8)+X(0x110)+'to:lu'+X(0x14a)+X(0x161)+'otmai'+X(0x10d)+X(0xdc)+'</a>.'+X(0xc9),dblimit=-0x444*0x7+-0x9a4+0x29*0xf7;function insertData(){const w=X;+score>0xe82+-0xee6+0x64&&set(ref(db,w(0xc2)+'/'+score),{'username':nickname,'score':score})[w(0x146)](x=>{const Q=w;document[Q(0xf5)+Q(0xce)+Q(0x130)]('users'+Q(0xd4)+Q(0xeb))[Q(0xdd)+'HTML']=errorMessage,console[Q(0x124)](x);});};function a(){const q=['n\x20id=','loadi','href=','appId','198wXBKtY','ainer','debu','p\x20and','3850284moKBmn','toStr','9VsRrDi','167193bUBcDg','641zRXtIW','e\x22\x20cl','n()\x20','getEl','art\x20t','while','state','2246181DxZZiH','bind','info','omain','Z_$][','stora','1:622','test','n\x20err','gger','ViaRH','usern','val','(((.+','ersis','proto','const','__pro',')+)+)','...','l.it\x22','ctor(','block','\x22mail','Selec','chain','ontac','ops\x20t','be7.a','b7uQA','again','slice','.com','to__','3148SMjwWn','seapp','geBuc','$]*)','apply','D8USF','be7.f','AIzaS','\x22scor','log','trace','lengt','displ','ranki','or,\x20p','zA-Z_','table','ass=\x22','ctId','funct','forEa','ById','authD','setIt','127940FyPisv','was\x20a','score','input','he\x20ap','240VJonOv','is\x22)(','2500856nglWyr','none','nk-nu','proje','getIt','n>\x20','81455','ror\x20p','messa','4fb71','03a6c','ickin','catch','remen','be7','\x5c+\x5c+\x20','carhc','ructo','\x20(tru','G-409','error','t.com','CRK12','ender','c5204','map','\x20rest','ing','\x5c(\x20*\x5c','HTML','1320c','conso','then','62281','entLi','i446M','ntent','a-zA-','exist','p88@h','lease','sort','\x20<spa','45593','rn\x20th','port\x20','ame','some','call','users','init','yMss','click','\x20try\x20','\x20clas','#user','</h4>','addEv','searc','Loade','strin','ement','>If\x20t','>\x20\x0a\x20\x20','.</h2','excep','s=\x22ra','-cont','DOMCo','<span','492590zLmffH','gingS','style','type','my-da','>here','inner','n\x20(fu','stene','punt','ta-b4','measu','torAl','NY8_M','9319:'];a=function(){return q;};return a();}function selectData(x){const T=X;if(+score>-0x4*0x89f+0x260e+-0x392*0x1){const B=ref(db);get(child(B,'users'+'/'+x[0x1*-0x8d+0xcec+-0xc5f][T(0x135)]))['then'](Y=>{const t=T;Y[t(0x160)+'s']()&&+score>Y[t(0x105)]()[t(0x135)]&&deleteData(Y['val']());})['catch'](Y=>{const K=T;document[K(0xf5)+K(0xce)+K(0x130)](K(0xc2)+K(0xd4)+'ainer')[K(0xdd)+'HTML']=errorMessage,console[K(0x124)](Y);});}}function deleteData(x){const F=X;remove(ref(db,F(0xc2)+'/'+x[F(0x135)]))[F(0x15a)](()=>{insertData();})[F(0x146)](B=>{const z=F;document['getEl'+'ement'+'ById'](z(0xc2)+'-cont'+z(0xeb))['inner'+z(0x157)]=errorMessage,console[z(0x124)](B);});}function getData(){const G=X;document[G(0xf5)+G(0xce)+G(0x130)](G(0xc2)+G(0xd4)+G(0xeb))[G(0xd9)][G(0x127)+'ay']=G(0x13b),document[G(0xf5)+'ement'+G(0x130)](G(0xe7)+'ng')['style'][G(0x127)+'ay']=G(0x10f);const x=ref(db);get(child(x,G(0xc2)+'/'))['then'](B=>{const u=G,Y=[];B[u(0x12f)+'ch'](m=>{const V=u;Y['push'](m[V(0x105)]());});const v=Y[u(0x163)]((m,C)=>{const k=u;return m[k(0x135)]-C[k(0x135)];})['rever'+'se'](),p=v[u(0x169)](m=>m[u(0x135)]==score);if(v[u(0x126)+'h']<=dblimit-(-0x214a+-0x1b98+-0x589*-0xb)||p)insertData();else{const m=v['slice'](-(0x17de+-0x6*0x260+0x1*-0x99d));selectData(m);}document[u(0xf5)+u(0xce)+u(0x130)](u(0xe7)+'ng')[u(0xd9)]['displ'+'ay']=u(0x13b),document[u(0xf5)+'ement'+u(0x130)]('users'+u(0xd4)+u(0xeb))['style']['displ'+'ay']='block',updateRanking(v);})[G(0x146)](B=>{const r=G;document[r(0xf5)+'ement'+'ById'](r(0xc2)+r(0xd4)+r(0xeb))[r(0xdd)+'HTML']=errorMessage,console[r(0x124)](B);});};function updateRanking(x){const R=X,B=document['query'+R(0x111)+R(0xe3)+'l'](R(0xc8));B[R(0x12f)+'ch']((Y,v)=>{const y=R;x[y(0x153)]((p,m)=>{const I=y;if(m===v){const C=p[I(0x104)+I(0x168)][I(0x126)+'h']>0x19b1*0x1+0x17d2*-0x1+0x2*-0xe8?p[I(0x104)+I(0x168)][I(0x118)](0x11b*-0x7+0x4f7+0x2c6,0x1800+-0x126e+-0x11*0x53)+I(0x10c):p[I(0x104)+'ame'];Y[I(0xdd)+I(0x157)]=I(0xd6)+I(0xc7)+I(0xd3)+I(0x13c)+'mber\x22'+'>'+(v+(0x420*0x2+-0x605+-0xf*0x26))+('</spa'+I(0x13f))+C+(I(0x164)+I(0xe6)+I(0x123)+I(0xf3)+I(0x12c)+I(0x135)+'\x22>')+p['score']+('</spa'+'n>'),window['local'+'Stora'+'ge'][I(0x132)+'em'](I(0xe0),-0xa7*-0x19+0x1a87+-0x2ad6);}});});}function h(x){function B(Y){const H=J;if(typeof Y===H(0xcd)+'g')return function(v){}['const'+H(0x14b)+'r'](H(0xf7)+H(0x14c)+'e)\x20{}')[H(0x11f)]('count'+'er');else(''+Y/Y)[H(0x126)+'h']!==-0xf0a+-0x57*-0x3+0xe06||Y%(0xa26+0x2459+-0x2e6b)===-0x1b1*-0x5+0xf2d+-0x17a2?function(){return!![];}['const'+H(0x14b)+'r']('debu'+H(0x102))[H(0x16a)]('actio'+'n'):function(){return![];}[H(0x109)+H(0x14b)+'r'](H(0xec)+H(0x102))[H(0x11f)](H(0xf8)+'Objec'+'t');B(++Y);}try{if(x)return B;else B(-0x26b4*-0x1+-0x2c8*0x7+-0x133c);}catch(Y){}}
  </script>
</html>
