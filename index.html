<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0"
    />
    <link rel="shortcut icon" href="img/favicon.ico" />
    <link rel="stylesheet" href="style.css" />
    <title>Flappy Poop</title>
    <style>
      canvas {
        background-image: url('img/background.webp');
        background-position: center;
        background-repeat: no-repeat;
        background-size: cover;
        overflow: hidden;
      }
    </style>
  </head>
  <body onload="getNickname()">
    <div class="container" id="start-game">
      <h2 class="custom-text" id="score-text"></h2>
      <label id="label-nickname" class="label-nickname">NICKNAME:</label>
      <input id="nickname" type="text" placeholder="Enter your nickname" />
      <button class="start-retry-btn animation-zoom" id="start-btn" onclick="startGame()">
        START
      </button>
      <button
        class="start-retry-btn"
        id="retry-btn"
        onclick="window.location.reload()"
      >
        Retry
      </button>
      <!-- >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>MODALE INFO<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<< -->
      <div id="info-modal" class="modal">
        <div class="modal-content">
          <span class="close">&times;</span>
          <p>
            For bug reports, or suggestions on how to improve, you can contact me at:
            <a href="mailto:lucarhcp88@hotmail.it">lucarhcp88@hotmail.it</a>
          </p>
          
          <p class="social">
            My YouTube channel:
            <a
              href="https://www.youtube.com/channel/UCVPzu5zrXrt8cgSEm73zVzA"
              target="_blank"
              rel="noopener noreferrer"
            >
              <img class="icon" src="img/youtube.webp" alt="youtube-icon" />
            </a>
          </p>
          <p class="social">
            My LinkedIn profile:
            <a
              href="https://www.linkedin.com/in/luca-caputo-1ba548140/
              target="_blank"
              rel="noopener noreferrer"
            >
              <img class="icon" src="img/linkedin.webp" alt="linkedin-icon" />
            </a>
          </p>
          <div class="share-container">
            <button class="share-btn" onclick="shareLink()">
              <img src="img/share.webp" alt="share"> SHARE
            </button> 
            <p id="link-copied" class="link-copied">Link copied to clipboard, paste it with whoever you want.</p>
          </div>
          <p>
            <small>Tip: every now and then restart the app, so as to always find it updated and functional.</small>
          </p>
          <div class="info-problems">
            <p class="info-problems-title">Problems?</p>
            <p>If the game's movements are jerky or very slow, check:</p>
            <ul>
              <li>the speed of your Internet connection.</li>
              <li>the memory of your device.</li>
              <li>the amount of apps open in the background.</li>
            </ul>
            <p>These are the factors that could slow down the game. So make sure you have a good internet connection, don't have low memory on your device, and don't have many apps running in the background.</p>
          </div>
          <div class="info-footer">
            <script type="text/javascript">
              copyright=new Date();
              update=copyright.getFullYear();
              document.write(`CopyrightÂ© 2022 - ${update} Caputo Luca - All right reserved.`);
            </script>
            <p class="privacy-policy">
              <a href="https://www.iubenda.com/privacy-policy/57073714" class="iubenda-black iubenda-noiframe iubenda-embed iubenda-noiframe" title="Privacy Policy ">Privacy Policy</a><script type="text/javascript">(function (w,d) {var loader = function () {var s = d.createElement("script"), tag = d.getElementsByTagName("script")[0]; s.src="https://cdn.iubenda.com/iubenda.js"; tag.parentNode.insertBefore(s,tag);}; if(w.addEventListener){w.addEventListener("load", loader, false);}else if(w.attachEvent){w.attachEvent("onload", loader);}else{w.onload = loader;}})(window, document);</script>  
            </p> 
          </div>
        </div>
      </div>
      <img id="info-btn" class="info-btn animation-zoom" src="img/toilet-paper.webp" alt="info-btn">

      <!-- >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>MODALE RANKING<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<< -->
      <div id="ranking-modal" class="modal">
        <div class="rank-modal-content">
          <span class="close">&times;</span>
          <h1 class="rank-modal-title">GLOBAL SCORES</h1>
            <div class="scores-container">
              <!-- per il momento ne metto 10+5 ma in futuro se l'app cresce ne metto 20/30, quindi altri <div class="second/third-ten"> ecc. -->
              <div class="first-ten">
                <h2 id="loading">...LOADING...</h2>
                <ul id="users-container" class="users-container">
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <!-- per il momento aggiungo 5 e ne faccio 15 totali -->
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                </ul>
              </div>
            </div>

        </div>
      </div>
      <img id="ranking-btn" class="ranking-btn animation-zoom" src="img/ranking.webp" alt="info-btn">
      
      <div id="no-nickname-modal" class="modal">
        <div class="modal-content no-nickname-modal-content">
          <span class="close">&times;</span>
          <h2>INSERT A NICKNAME PLEASE!</h2>
        </div>
      </div>

      <audio id="audio">
        <source src="sounds/LightMyFire.mp3" type="audio/mpeg" />
        Your browser does not support the audio element.
      </audio>
       <button id="audio-btn" class="audio-btn" onclick="toggleAudio()">
        <img id="audio-icon" src="img/sound-off.webp" alt="audio_play/pause" />
      </button>
    </div>
    <br />
    <button
      class="fly-btn"
      id="fly-poop"
      onmousedown="accelerate(-0.4)"
      onmouseup="accelerate(0.15)"
    >
      FLY
    </button>
    <button 
      class="stop-btn" 
      id="stop-poop"
      onclick="window.location.reload()"
    >
      &#11035;
    </button>
  </body>
  <script src="main.js" charset="utf-8"></script>
  <script type="module">
    function _0x50ab(){const _0x47a9ab=['block','51268eVDbYs','78elYXGD','punt','#user','getItem','\x20<span\x20id=\x22score\x22\x20class=\x22score\x22>','291725tgJKHv','</span>','3651PKsMcc','622814559319','3792184QGneiE','style','ranking-btn','localStorage','score','then','log','username','1:622814559319:web:603a6c1320cc52044fb712','display','slice','<span\x20class=\x22rank-number\x22>','my-data-b4be7.appspot.com','5411035kPrCNW','reverse','users/','map','val','setItem','innerHTML','G-409CRK129C','sort','catch','3084jQneFY','my-data-b4be7','users-container','some','loading','my-data-b4be7.firebaseapp.com','24304194XFbvqa','2339486IySrAP','getElementById','forEach','exists','length','addEventListener','none'];_0x50ab=function(){return _0x47a9ab;};return _0x50ab();}const _0x36bcfd=_0x1352;(function(_0x5a5ba2,_0x4d024d){const _0x3000b2=_0x1352,_0x1e4bdc=_0x5a5ba2();while(!![]){try{const _0x2a796e=parseInt(_0x3000b2(0x1e4))/0x1+parseInt(_0x3000b2(0x1dc))/0x2+parseInt(_0x3000b2(0x1ec))/0x3*(parseInt(_0x3000b2(0x205))/0x4)+parseInt(_0x3000b2(0x1fb))/0x5+-parseInt(_0x3000b2(0x1e5))/0x6*(-parseInt(_0x3000b2(0x1ea))/0x7)+-parseInt(_0x3000b2(0x1ee))/0x8+-parseInt(_0x3000b2(0x1db))/0x9;if(_0x2a796e===_0x4d024d)break;else _0x1e4bdc['push'](_0x1e4bdc['shift']());}catch(_0x582c12){_0x1e4bdc['push'](_0x1e4bdc['shift']());}}}(_0x50ab,0x94a2b));import{initializeApp}from'https://www.gstatic.com/firebasejs/9.10.0/firebase-app.js';import{getAnalytics}from'https://www.gstatic.com/firebasejs/9.10.0/firebase-analytics.js';function _0x1352(_0x4b24d1,_0x13a6f4){const _0x50aba4=_0x50ab();return _0x1352=function(_0x1352b2,_0x4c7003){_0x1352b2=_0x1352b2-0x1da;let _0x455069=_0x50aba4[_0x1352b2];return _0x455069;},_0x1352(_0x4b24d1,_0x13a6f4);}const firebaseConfig={'apiKey':'AIzaSyCXSfNY8_Mi446Mb7uQAD8USFViaRHyMss','authDomain':_0x36bcfd(0x1da),'projectId':_0x36bcfd(0x206),'storageBucket':_0x36bcfd(0x1fa),'messagingSenderId':_0x36bcfd(0x1ed),'appId':_0x36bcfd(0x1f6),'measurementId':_0x36bcfd(0x202)},app=initializeApp(firebaseConfig),analytics=getAnalytics(app);import{getDatabase,ref,set,get,child,remove}from'https://www.gstatic.com/firebasejs/9.10.0/firebase-database.js';const db=getDatabase();document[_0x36bcfd(0x1dd)](_0x36bcfd(0x1f0))[_0x36bcfd(0x1e1)]('click',getData);const nickname=localStorage[_0x36bcfd(0x1e8)]('nickname'),score=localStorage[_0x36bcfd(0x1e8)](_0x36bcfd(0x1e6)),errorMessage='<h2>Oops\x20there\x20was\x20an\x20error,\x20please\x20restart\x20the\x20app\x20and\x20try\x20again.</h2>\x20\x0a\x20\x20\x20\x20<h4>If\x20the\x20error\x20persists,\x20contact\x20support\x20by\x20clicking\x20<a\x20href=\x22mailto:lucarhcp88@hotmail.it\x22>here</a>.</h4>',dblimit=0xf;function insertData(){const _0x3021cb=_0x36bcfd;+score>0x0&&set(ref(db,_0x3021cb(0x1fd)+score),{'username':nickname,'score':score})[_0x3021cb(0x204)](_0x2355d6=>{const _0x33a7e5=_0x3021cb;document[_0x33a7e5(0x1dd)](_0x33a7e5(0x207))[_0x33a7e5(0x201)]=errorMessage,console[_0x33a7e5(0x1f4)](_0x2355d6);});};function selectData(_0x24e767){const _0x5a4363=_0x36bcfd;if(+score>0x0){const _0xeafe64=ref(db);get(child(_0xeafe64,'users/'+_0x24e767[0x0][_0x5a4363(0x1f2)]))[_0x5a4363(0x1f3)](_0x3a9331=>{const _0x39dc4e=_0x5a4363;_0x3a9331[_0x39dc4e(0x1df)]()&&+score>_0x3a9331['val']()[_0x39dc4e(0x1f2)]&&deleteData(_0x3a9331[_0x39dc4e(0x1ff)]());})['catch'](_0x3bdec7=>{const _0x50ad66=_0x5a4363;document[_0x50ad66(0x1dd)]('users-container')[_0x50ad66(0x201)]=errorMessage,console[_0x50ad66(0x1f4)](_0x3bdec7);});}}function deleteData(_0x251b88){const _0xbc3687=_0x36bcfd;remove(ref(db,_0xbc3687(0x1fd)+_0x251b88['score']))['then'](()=>{insertData();})['catch'](_0x16f057=>{const _0x520048=_0xbc3687;document[_0x520048(0x1dd)](_0x520048(0x207))[_0x520048(0x201)]=errorMessage,console[_0x520048(0x1f4)](_0x16f057);});}function getData(){const _0x5c34be=_0x36bcfd;document[_0x5c34be(0x1dd)](_0x5c34be(0x207))[_0x5c34be(0x1ef)][_0x5c34be(0x1f7)]=_0x5c34be(0x1e2),document[_0x5c34be(0x1dd)](_0x5c34be(0x209))['style'][_0x5c34be(0x1f7)]='block';const _0x4f90fa=ref(db);get(child(_0x4f90fa,_0x5c34be(0x1fd)))[_0x5c34be(0x1f3)](_0x523a21=>{const _0x56bf78=_0x5c34be,_0x4e4a68=[];_0x523a21[_0x56bf78(0x1de)](_0x45b796=>{const _0x33acc6=_0x56bf78;_0x4e4a68['push'](_0x45b796[_0x33acc6(0x1ff)]());});const _0x1db541=_0x4e4a68[_0x56bf78(0x203)]((_0x594ba3,_0x591ed0)=>{const _0x32b06b=_0x56bf78;return _0x594ba3['score']-_0x591ed0[_0x32b06b(0x1f2)];})[_0x56bf78(0x1fc)](),_0x2a6cd8=_0x1db541[_0x56bf78(0x208)](_0x18ffe6=>_0x18ffe6[_0x56bf78(0x1f2)]==score);if(_0x1db541['length']<=dblimit-0x1||_0x2a6cd8)insertData();else{const _0x238cfe=_0x1db541[_0x56bf78(0x1f8)](-0x1);selectData(_0x238cfe);}document[_0x56bf78(0x1dd)](_0x56bf78(0x209))['style'][_0x56bf78(0x1f7)]=_0x56bf78(0x1e2),document['getElementById'](_0x56bf78(0x207))[_0x56bf78(0x1ef)][_0x56bf78(0x1f7)]=_0x56bf78(0x1e3),updateRanking(_0x1db541);})[_0x5c34be(0x204)](_0x285a53=>{const _0x54f54d=_0x5c34be;document[_0x54f54d(0x1dd)](_0x54f54d(0x207))[_0x54f54d(0x201)]=errorMessage,console[_0x54f54d(0x1f4)](_0x285a53);});};function updateRanking(_0x426a20){const _0x3f495e=_0x36bcfd,_0x34b44e=document['querySelectorAll'](_0x3f495e(0x1e7));_0x34b44e[_0x3f495e(0x1de)]((_0x1975f0,_0x5e947a)=>{const _0x55128c=_0x3f495e;_0x426a20[_0x55128c(0x1fe)]((_0x59d8ba,_0xbb9ea7)=>{const _0x33b41c=_0x55128c;if(_0xbb9ea7===_0x5e947a){const _0x2b5aa5=_0x59d8ba[_0x33b41c(0x1f5)][_0x33b41c(0x1e0)]>0xf?_0x59d8ba[_0x33b41c(0x1f5)][_0x33b41c(0x1f8)](0x0,0xf)+'...':_0x59d8ba['username'];_0x1975f0[_0x33b41c(0x201)]=_0x33b41c(0x1f9)+(_0x5e947a+0x1)+'</span>\x20'+_0x2b5aa5+_0x33b41c(0x1e9)+_0x59d8ba[_0x33b41c(0x1f2)]+_0x33b41c(0x1eb),window[_0x33b41c(0x1f1)][_0x33b41c(0x200)]('punt',0x0);}});});}
  </script>
</html>
