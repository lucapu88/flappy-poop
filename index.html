<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0"
    />
    <link rel="shortcut icon" href="img/favicon.ico" />
    <link rel="stylesheet" href="style.css" />
    <title>Flappy Poop</title>
    <style>
      canvas {
        background-image: url('img/background.webp');
        background-position: center;
        background-repeat: no-repeat;
        background-size: cover;
        overflow: hidden;
      }
    </style>
  </head>
  <body onload="getNickname()">
    <div class="container" id="start-game">
      <h2 class="custom-text" id="score-text"></h2>
      <label id="label-nickname" class="label-nickname">NICKNAME:</label>
      <input id="nickname" type="text" placeholder="Enter your nickname" />
      <button class="start-retry-btn animation-zoom" id="start-btn" onclick="startGame()">
        START
      </button>
      <button
        class="start-retry-btn"
        id="retry-btn"
        onclick="window.location.reload()"
      >
        Retry
      </button>
      <!-- >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>MODALE INFO<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<< -->
      <div id="info-modal" class="modal">
        <div class="modal-content">
          <span class="close">&times;</span>
          <p>
            For bug reports, or suggestions on how to improve, you can contact me at:
            <a href="mailto:lucarhcp88@hotmail.it">lucarhcp88@hotmail.it</a>
          </p>
          
          <p class="social">
            My YouTube channel:
            <a
              href="https://www.youtube.com/channel/UCVPzu5zrXrt8cgSEm73zVzA"
              target="_blank"
              rel="noopener noreferrer"
            >
              <img class="icon" src="img/youtube.webp" alt="youtube-icon" />
            </a>
          </p>
          <p class="social">
            My LinkedIn profile:
            <a
              href="https://www.linkedin.com/in/luca-caputo-1ba548140/
              target="_blank"
              rel="noopener noreferrer"
            >
              <img class="icon" src="img/linkedin.webp" alt="linkedin-icon" />
            </a>
          </p>
          <div class="share-container">
            <button class="share-btn" onclick="shareLink()">
              <img src="img/share.webp" alt="share"> SHARE
            </button> 
            <p id="link-copied" class="link-copied">Link copied to clipboard, paste it with whoever you want.</p>
          </div>
          <p>
            <small>Tip: every now and then restart the app, so as to always find it updated and functional.</small>
          </p>
          <div class="info-problems">
            <p class="info-problems-title">Problems?</p>
            <p>If the game's movements are jerky or very slow, check:</p>
            <ul>
              <li>the speed of your Internet connection.</li>
              <li>the memory of your device.</li>
              <li>the amount of apps open in the background.</li>
            </ul>
            <p>These are the factors that could slow down the game. So make sure you have a good internet connection, don't have low memory on your device, and don't have many apps running in the background.</p>
          </div>
          <div class="info-footer">
            <script type="text/javascript">
              copyright=new Date();
              update=copyright.getFullYear();
              document.write(`CopyrightÂ© 2022 - ${update} Caputo Luca - All right reserved.`);
            </script>
            <p class="privacy-policy">
              <a href="https://www.iubenda.com/privacy-policy/57073714" class="iubenda-black iubenda-noiframe iubenda-embed iubenda-noiframe" title="Privacy Policy ">Privacy Policy</a><script type="text/javascript">(function (w,d) {var loader = function () {var s = d.createElement("script"), tag = d.getElementsByTagName("script")[0]; s.src="https://cdn.iubenda.com/iubenda.js"; tag.parentNode.insertBefore(s,tag);}; if(w.addEventListener){w.addEventListener("load", loader, false);}else if(w.attachEvent){w.attachEvent("onload", loader);}else{w.onload = loader;}})(window, document);</script>  
            </p> 
          </div>
        </div>
      </div>
      <img id="info-btn" class="info-btn animation-zoom" src="img/toilet-paper.webp" alt="info-btn">

      <!-- >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>MODALE RANKING<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<< -->
      <div id="ranking-modal" class="modal">
        <div class="rank-modal-content">
          <span class="close">&times;</span>
          <h1 class="rank-modal-title">GLOBAL SCORES</h1>
            <div class="scores-container">
              <!-- per il momento ne metto 10+5 ma in futuro se l'app cresce ne metto 20/30, quindi altri <div class="second/third-ten"> ecc. -->
              <div class="first-ten">
                <ul id="users-container" class="users-container">
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <!-- per il momento aggiungo 5 e ne faccio 15 totali -->
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                </ul>
              </div>
            </div>

        </div>
      </div>
      <img id="ranking-btn" class="ranking-btn animation-zoom" src="img/ranking.webp" alt="info-btn">
      
      <div id="no-nickname-modal" class="modal">
        <div class="modal-content no-nickname-modal-content">
          <span class="close">&times;</span>
          <h2>INSERT A NICKNAME PLEASE!</h2>
        </div>
      </div>

      <audio id="audio">
        <source src="sounds/fart.mp3" type="audio/mpeg" />
        Your browser does not support the audio element.
      </audio>
       <button id="audio-btn" class="audio-btn" onclick="toggleAudio()">
        <img id="audio-icon" src="img/sound-off.webp" alt="audio_play/pause" />
      </button>
    </div>
    <br />
    <button
      class="fly-btn"
      id="fly-poop"
      onmousedown="accelerate(-0.4)"
      onmouseup="accelerate(0.15)"
    >
      FLY
    </button>
    <button 
      class="stop-btn" 
      id="stop-poop"
      onclick="window.location.reload()"
    >
      &#11035;
    </button>
  </body>
  <script src="main.js" charset="utf-8"></script>
  <script type="module">
    const _0x3fd157=_0x9a84;(function(_0xd5f6f6,_0x31ccb2){const _0x5e5b9b=_0x9a84,_0x4ba85b=_0xd5f6f6();while(!![]){try{const _0x1b62a6=-parseInt(_0x5e5b9b(0x9d))/0x1+-parseInt(_0x5e5b9b(0xac))/0x2+parseInt(_0x5e5b9b(0xa3))/0x3*(-parseInt(_0x5e5b9b(0x92))/0x4)+parseInt(_0x5e5b9b(0x98))/0x5*(-parseInt(_0x5e5b9b(0xab))/0x6)+-parseInt(_0x5e5b9b(0xa0))/0x7*(-parseInt(_0x5e5b9b(0x8b))/0x8)+parseInt(_0x5e5b9b(0x8f))/0x9*(-parseInt(_0x5e5b9b(0x8e))/0xa)+parseInt(_0x5e5b9b(0xa1))/0xb;if(_0x1b62a6===_0x31ccb2)break;else _0x4ba85b['push'](_0x4ba85b['shift']());}catch(_0x453513){_0x4ba85b['push'](_0x4ba85b['shift']());}}}(_0x5a74,0x65c60));import{initializeApp}from'https://www.gstatic.com/firebasejs/9.10.0/firebase-app.js';import{getAnalytics}from'https://www.gstatic.com/firebasejs/9.10.0/firebase-analytics.js';const firebaseConfig={'apiKey':_0x3fd157(0xa9),'authDomain':_0x3fd157(0x9a),'projectId':_0x3fd157(0xa2),'storageBucket':_0x3fd157(0xa5),'messagingSenderId':_0x3fd157(0x90),'appId':_0x3fd157(0x9f),'measurementId':_0x3fd157(0x93)},app=initializeApp(firebaseConfig),analytics=getAnalytics(app);import{getDatabase,ref,set,get,update,child,remove}from'https://www.gstatic.com/firebasejs/9.10.0/firebase-database.js';const db=getDatabase();document['addEventListener']('DOMContentLoaded',getData);const nickname=localStorage[_0x3fd157(0xa7)](_0x3fd157(0x94)),score=localStorage[_0x3fd157(0xa7)](_0x3fd157(0xa6)),errorMessage=_0x3fd157(0x82);function insertData(){const _0x2dd43a=_0x3fd157;+score>0x0&&set(ref(db,_0x2dd43a(0x84)+score),{'username':nickname,'score':score})[_0x2dd43a(0x8a)](_0x1ea87e=>{const _0x485fa4=_0x2dd43a;document[_0x485fa4(0x97)]('users-container')[_0x485fa4(0xa4)]=errorMessage,console[_0x485fa4(0x8d)](_0x1ea87e);});};function selectData(_0x5a3a3b){const _0x36de39=_0x3fd157;if(+score>0x0){const _0x216eca=ref(db);get(child(_0x216eca,_0x36de39(0x84)+_0x5a3a3b[0x0][_0x36de39(0x87)]))[_0x36de39(0x83)](_0x1b49eb=>{const _0x1e06dd=_0x36de39;_0x1b49eb[_0x1e06dd(0xa8)]()&&updateData(_0x1b49eb[_0x1e06dd(0x96)]());})[_0x36de39(0x8a)](_0x1e30ea=>{const _0x3eb1b5=_0x36de39;document[_0x3eb1b5(0x97)](_0x3eb1b5(0xaa))[_0x3eb1b5(0xa4)]=errorMessage,console[_0x3eb1b5(0x8d)](_0x1e30ea);});}}function _0x9a84(_0x49f10f,_0x42e3c5){const _0x5a742d=_0x5a74();return _0x9a84=function(_0x9a8493,_0x233f94){_0x9a8493=_0x9a8493-0x82;let _0x3d468c=_0x5a742d[_0x9a8493];return _0x3d468c;},_0x9a84(_0x49f10f,_0x42e3c5);}function updateData(_0x3a8244){const _0x104429=_0x3fd157;update(ref(db,_0x104429(0x84)+_0x3a8244[_0x104429(0x87)]),{'username':nickname,'score':score})[_0x104429(0x8a)](_0x23608e=>{const _0x5c537b=_0x104429;document['getElementById'](_0x5c537b(0xaa))[_0x5c537b(0xa4)]=errorMessage,console['log'](_0x23608e);});}function _0x5a74(){const _0x1493ed=['<h2>Oops\x20there\x20was\x20an\x20error,\x20please\x20restart\x20the\x20app\x20and\x20try\x20again.</h2>\x20\x0a\x20\x20\x20\x20<h4>If\x20the\x20error\x20persists,\x20contact\x20support\x20by\x20clicking\x20<a\x20href=\x22mailto:lucarhcp88@hotmail.it\x22>here</a>.</h4>','then','users/','reverse','username','score','#user','slice','catch','555720yhoLtD','setItem','log','180850OcraVw','108hNNTBJ','622814559319','</span>','20CGBwBp','G-409CRK129C','nickname','length','val','getElementById','499405KTkRWb','\x20<span\x20id=\x22score\x22\x20class=\x22score\x22>','my-data-b4be7.firebaseapp.com','localStorage','forEach','86841vcktQn','...','1:622814559319:web:603a6c1320cc52044fb712','35PyvSwc','15231007WEmiQe','my-data-b4be7','129462kiVENo','innerHTML','my-data-b4be7.appspot.com','punt','getItem','exists','AIzaSyCXSfNY8_Mi446Mb7uQAD8USFViaRHyMss','users-container','12kPJNUG','1191410Xcuvzj'];_0x5a74=function(){return _0x1493ed;};return _0x5a74();}function getData(){const _0xb3da5d=_0x3fd157,_0x35a714=0xe,_0x2313d4=ref(db);get(child(_0x2313d4,_0xb3da5d(0x84)))['then'](_0x36d0ad=>{const _0x432929=_0xb3da5d,_0x29827f=[];_0x36d0ad[_0x432929(0x9c)](_0x4bc5a6=>{const _0x3e7648=_0x432929;_0x29827f['push'](_0x4bc5a6[_0x3e7648(0x96)]());});const _0x57f2da=_0x29827f['sort']((_0x40d8d2,_0x2be419)=>{const _0x5749e3=_0x432929;return _0x40d8d2['score']-_0x2be419[_0x5749e3(0x87)];})[_0x432929(0x85)]();if(_0x57f2da['length']<=_0x35a714)insertData();else{const _0x29a6b3=_0x57f2da[_0x432929(0x89)](-0x1);selectData(_0x29a6b3);}const _0x572987=document['querySelectorAll'](_0x432929(0x88));_0x572987[_0x432929(0x9c)]((_0x1b14b8,_0x42eae0)=>{_0x57f2da['map']((_0x4aa1e2,_0x1211fe)=>{const _0x3d63f0=_0x9a84;if(_0x1211fe===_0x42eae0){const _0x409986=_0x4aa1e2[_0x3d63f0(0x86)][_0x3d63f0(0x95)]>0xf?_0x4aa1e2[_0x3d63f0(0x86)]['slice'](0x0,0x14)+_0x3d63f0(0x9e):_0x4aa1e2[_0x3d63f0(0x86)];_0x1b14b8['innerHTML']=_0x42eae0+0x1+'\x20\x20'+_0x409986+_0x3d63f0(0x99)+_0x4aa1e2[_0x3d63f0(0x87)]+_0x3d63f0(0x91),window[_0x3d63f0(0x9b)][_0x3d63f0(0x8c)](_0x3d63f0(0xa6),0x0);}});});})[_0xb3da5d(0x8a)](_0x4da6b0=>{const _0x3f4d58=_0xb3da5d;document[_0x3f4d58(0x97)](_0x3f4d58(0xaa))[_0x3f4d58(0xa4)]=errorMessage,console[_0x3f4d58(0x8d)](_0x4da6b0);});};
  </script>
</html>
