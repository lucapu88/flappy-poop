<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0"
    />
    <link rel="shortcut icon" href="img/favicon.ico" />
    <link rel="stylesheet" href="style.css" />
    <title>Flappy Poop</title>
    <style>
      canvas {
        background-image: url('img/background.webp');
        background-position: center;
        background-repeat: no-repeat;
        background-size: cover;
        overflow: hidden;
      }
    </style>
  </head>
  <body onload="getNickname()">
    <div class="container" id="start-game">
      <h2 class="custom-text" id="score-text"></h2>
      <label id="label-nickname" class="label-nickname">NICKNAME:</label>
      <input id="nickname" type="text" placeholder="Enter your nickname" />
      <button class="start-retry-btn animation-zoom" id="start-btn" onclick="startGame()">
        START
      </button>
      <button
        class="start-retry-btn"
        id="retry-btn"
        onclick="window.location.reload()"
      >
        Retry
      </button>
      <!-- >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>MODALE INFO<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<< -->
      <div id="info-modal" class="modal">
        <div class="modal-content">
          <span class="close">&times;</span>
          <p>
            For bug reports, or suggestions on how to improve, you can contact me at:
            <a href="mailto:lucarhcp88@hotmail.it">lucarhcp88@hotmail.it</a>
          </p>
          
          <p class="social">
            My YouTube channel:
            <a
              href="https://www.youtube.com/channel/UCVPzu5zrXrt8cgSEm73zVzA"
              target="_blank"
              rel="noopener noreferrer"
            >
              <img class="icon" src="img/youtube.webp" alt="youtube-icon" />
            </a>
          </p>
          <p class="social">
            My LinkedIn profile:
            <a
              href="https://www.linkedin.com/in/luca-caputo-1ba548140/
              target="_blank"
              rel="noopener noreferrer"
            >
              <img class="icon" src="img/linkedin.webp" alt="linkedin-icon" />
            </a>
          </p>
          <div class="share-container">
            <button class="share-btn" onclick="shareLink()">
              <img src="img/share.webp" alt="share"> SHARE
            </button> 
            <p id="link-copied" class="link-copied">Link copied to clipboard, paste it with whoever you want.</p>
          </div>
          <p>
            <small>Tip: every now and then restart the app, so as to always find it updated and functional.</small>
          </p>
          <div class="info-problems">
            <p class="info-problems-title">Problems?</p>
            <p>If the game's movements are jerky or very slow, check:</p>
            <ul>
              <li>the speed of your Internet connection.</li>
              <li>the memory of your device.</li>
              <li>the amount of apps open in the background.</li>
            </ul>
            <p>These are the factors that could slow down the game. So make sure you have a good internet connection, don't have low memory on your device, and don't have many apps running in the background.</p>
          </div>
          <div class="info-footer">
            <script type="text/javascript">
              copyright=new Date();
              update=copyright.getFullYear();
              document.write(`CopyrightÂ© 2022 - ${update} Caputo Luca - All right reserved.`);
            </script>
            <p class="privacy-policy">
              <a href="https://www.iubenda.com/privacy-policy/57073714" class="iubenda-black iubenda-noiframe iubenda-embed iubenda-noiframe" title="Privacy Policy ">Privacy Policy</a><script type="text/javascript">(function (w,d) {var loader = function () {var s = d.createElement("script"), tag = d.getElementsByTagName("script")[0]; s.src="https://cdn.iubenda.com/iubenda.js"; tag.parentNode.insertBefore(s,tag);}; if(w.addEventListener){w.addEventListener("load", loader, false);}else if(w.attachEvent){w.attachEvent("onload", loader);}else{w.onload = loader;}})(window, document);</script>  
            </p> 
          </div>
        </div>
      </div>
      <img id="info-btn" class="info-btn animation-zoom" src="img/toilet-paper.webp" alt="info-btn">

      <!-- >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>MODALE RANKING<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<< -->
      <div id="ranking-modal" class="modal">
        <div class="rank-modal-content">
          <span class="close">&times;</span>
          <h1 class="rank-modal-title">GLOBAL SCORES</h1>
            <div class="scores-container">
              <!-- per il momento ne metto 10+5 ma in futuro se l'app cresce ne metto 20/30, quindi altri <div class="second/third-ten"> ecc. -->
              <div class="first-ten">
                <h2 id="loading">...LOADING...</h2>
                <ul id="users-container" class="users-container">
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <!-- per il momento aggiungo 5 e ne faccio 15 totali -->
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                </ul>
              </div>
            </div>

        </div>
      </div>
      <img id="ranking-btn" class="ranking-btn animation-zoom" src="img/ranking.webp" alt="info-btn">
      
      <div id="no-nickname-modal" class="modal">
        <div class="modal-content no-nickname-modal-content">
          <span class="close">&times;</span>
          <h2>INSERT A NICKNAME PLEASE!</h2>
        </div>
      </div>

      <audio id="audio">
        <source src="sounds/LightMyFire.mp3" type="audio/mpeg" />
        Your browser does not support the audio element.
      </audio>
       <button id="audio-btn" class="audio-btn" onclick="toggleAudio()">
        <img id="audio-icon" src="img/sound-off.webp" alt="audio_play/pause" />
      </button>
    </div>
    <br />
    <button
      class="fly-btn"
      id="fly-poop"
      onmousedown="accelerate(-0.4)"
      onmouseup="accelerate(0.15)"
    >
      FLY
    </button>
    <button 
      class="stop-btn" 
      id="stop-poop"
      onclick="window.location.reload()"
    >
      &#11035;
    </button>
  </body>
  <script src="main.js" charset="utf-8"></script>
  <script type="module">
    const _0x32aa1a=_0x195e;(function(_0x40231b,_0xac5edb){const _0x29b83c=_0x195e,_0x2bee8b=_0x40231b();while(!![]){try{const _0x562b00=-parseInt(_0x29b83c(0x1db))/0x1+parseInt(_0x29b83c(0x1c8))/0x2+-parseInt(_0x29b83c(0x1d0))/0x3*(-parseInt(_0x29b83c(0x1e7))/0x4)+parseInt(_0x29b83c(0x1df))/0x5*(parseInt(_0x29b83c(0x1dd))/0x6)+parseInt(_0x29b83c(0x1e6))/0x7*(-parseInt(_0x29b83c(0x1cd))/0x8)+-parseInt(_0x29b83c(0x1f5))/0x9+parseInt(_0x29b83c(0x1eb))/0xa*(parseInt(_0x29b83c(0x1e5))/0xb);if(_0x562b00===_0xac5edb)break;else _0x2bee8b['push'](_0x2bee8b['shift']());}catch(_0x4a183f){_0x2bee8b['push'](_0x2bee8b['shift']());}}}(_0x3817,0xe0a15));function _0x195e(_0x202210,_0x53585d){const _0x38178a=_0x3817();return _0x195e=function(_0x195eaf,_0x19490c){_0x195eaf=_0x195eaf-0x1c8;let _0x3bcd0e=_0x38178a[_0x195eaf];return _0x3bcd0e;},_0x195e(_0x202210,_0x53585d);}import{initializeApp}from'https://www.gstatic.com/firebasejs/9.10.0/firebase-app.js';function _0x3817(){const _0x3136d5=['410630RkYFbb','length','log','val','punt','querySelectorAll','74877wVUhPY','133042cfEwDF','1964nYqHLt','localStorage','AIzaSyCXSfNY8_Mi446Mb7uQAD8USFViaRHyMss','score','2570tsnNHz','reverse','users-container','catch','nickname','1:622814559319:web:603a6c1320cc52044fb712','then','G-409CRK129C','style','some','13055445PJwnhY','display','<span\x20class=\x22rank-number\x22>','162668hBApLs','map','getElementById','622814559319','</span>\x20','128bdSVFD','...','innerHTML','4119UXdPVs','setItem','exists','<h2>Oops\x20there\x20was\x20an\x20error,\x20please\x20restart\x20the\x20app\x20and\x20try\x20again.</h2>\x20\x0a\x20\x20\x20\x20<h4>If\x20the\x20error\x20persists,\x20contact\x20support\x20by\x20clicking\x20<a\x20href=\x22mailto:lucarhcp88@hotmail.it\x22>here</a>.</h4>','username','addEventListener','loading','my-data-b4be7.appspot.com','slice','block','users/','404972kWOkxI','ranking-btn','42YcHuce','none'];_0x3817=function(){return _0x3136d5;};return _0x3817();}import{getAnalytics}from'https://www.gstatic.com/firebasejs/9.10.0/firebase-analytics.js';const firebaseConfig={'apiKey':_0x32aa1a(0x1e9),'authDomain':'my-data-b4be7.firebaseapp.com','projectId':'my-data-b4be7','storageBucket':_0x32aa1a(0x1d7),'messagingSenderId':_0x32aa1a(0x1cb),'appId':_0x32aa1a(0x1f0),'measurementId':_0x32aa1a(0x1f2)},app=initializeApp(firebaseConfig),analytics=getAnalytics(app);import{getDatabase,ref,set,get,child,remove}from'https://www.gstatic.com/firebasejs/9.10.0/firebase-database.js';const db=getDatabase();document[_0x32aa1a(0x1ca)](_0x32aa1a(0x1dc))[_0x32aa1a(0x1d5)]('click',getData);const nickname=localStorage['getItem'](_0x32aa1a(0x1ef)),score=localStorage['getItem'](_0x32aa1a(0x1e3)),errorMessage=_0x32aa1a(0x1d3),dblimit=0xf;function insertData(){const _0xa93775=_0x32aa1a;+score>0x0&&set(ref(db,_0xa93775(0x1da)+score),{'username':nickname,'score':score})[_0xa93775(0x1ee)](_0x18203b=>{const _0x22634d=_0xa93775;document[_0x22634d(0x1ca)](_0x22634d(0x1ed))[_0x22634d(0x1cf)]=errorMessage,console[_0x22634d(0x1e1)](_0x18203b);});};function selectData(_0x21389c){const _0x40a7ab=_0x32aa1a;if(+score>0x0){const _0x2f5d2e=ref(db);get(child(_0x2f5d2e,_0x40a7ab(0x1da)+_0x21389c[0x0][_0x40a7ab(0x1ea)]))[_0x40a7ab(0x1f1)](_0x1519a6=>{const _0x33af8b=_0x40a7ab;_0x1519a6[_0x33af8b(0x1d2)]()&&+score>_0x1519a6[_0x33af8b(0x1e2)]()[_0x33af8b(0x1ea)]&&deleteData(_0x1519a6['val']());})[_0x40a7ab(0x1ee)](_0x205914=>{const _0x18b246=_0x40a7ab;document[_0x18b246(0x1ca)](_0x18b246(0x1ed))[_0x18b246(0x1cf)]=errorMessage,console[_0x18b246(0x1e1)](_0x205914);});}}function deleteData(_0x3087e7){const _0x3b219c=_0x32aa1a;remove(ref(db,_0x3b219c(0x1da)+_0x3087e7[_0x3b219c(0x1ea)]))[_0x3b219c(0x1f1)](()=>{insertData();})[_0x3b219c(0x1ee)](_0x57c116=>{const _0x471920=_0x3b219c;document[_0x471920(0x1ca)](_0x471920(0x1ed))['innerHTML']=errorMessage,console[_0x471920(0x1e1)](_0x57c116);});}function getData(){const _0x508ea0=_0x32aa1a;document[_0x508ea0(0x1ca)](_0x508ea0(0x1ed))[_0x508ea0(0x1f3)]['display']=_0x508ea0(0x1de),document['getElementById'](_0x508ea0(0x1d6))['style'][_0x508ea0(0x1f6)]=_0x508ea0(0x1d9);const _0x504f9a=ref(db);get(child(_0x504f9a,_0x508ea0(0x1da)))[_0x508ea0(0x1f1)](_0x2d81a0=>{const _0x26208a=_0x508ea0,_0x4ada89=[];_0x2d81a0['forEach'](_0x2ff518=>{const _0x457c91=_0x195e;_0x4ada89['push'](_0x2ff518[_0x457c91(0x1e2)]());});const _0x3ba7f6=_0x4ada89['sort']((_0xa0987c,_0x1919ce)=>{const _0x1f7540=_0x195e;return _0xa0987c[_0x1f7540(0x1ea)]-_0x1919ce[_0x1f7540(0x1ea)];})[_0x26208a(0x1ec)](),_0xa85779=_0x3ba7f6[_0x26208a(0x1f4)](_0x203a93=>_0x203a93[_0x26208a(0x1ea)]==score);if(_0x3ba7f6['length']<=dblimit-0x1||_0xa85779)insertData();else{const _0x196c2e=_0x3ba7f6[_0x26208a(0x1d8)](-0x1);selectData(_0x196c2e);}document['getElementById']('loading')[_0x26208a(0x1f3)]['display']=_0x26208a(0x1de),document[_0x26208a(0x1ca)](_0x26208a(0x1ed))[_0x26208a(0x1f3)][_0x26208a(0x1f6)]='block',updateRanking(_0x3ba7f6);})['catch'](_0x22c388=>{const _0x13b419=_0x508ea0;document[_0x13b419(0x1ca)](_0x13b419(0x1ed))['innerHTML']=errorMessage,console[_0x13b419(0x1e1)](_0x22c388);});};function updateRanking(_0x225236){const _0x5c9170=_0x32aa1a,_0x7ea7=document[_0x5c9170(0x1e4)]('#user');_0x7ea7['forEach']((_0x19a810,_0x177f0c)=>{const _0x45b4fc=_0x5c9170;_0x225236[_0x45b4fc(0x1c9)]((_0x5237d5,_0x55dd33)=>{const _0x1532f1=_0x45b4fc;if(_0x55dd33===_0x177f0c){const _0x47e622=_0x5237d5[_0x1532f1(0x1d4)][_0x1532f1(0x1e0)]>0xf?_0x5237d5[_0x1532f1(0x1d4)][_0x1532f1(0x1d8)](0x0,0xf)+_0x1532f1(0x1ce):_0x5237d5[_0x1532f1(0x1d4)];_0x19a810[_0x1532f1(0x1cf)]=_0x1532f1(0x1f7)+(_0x177f0c+0x1)+_0x1532f1(0x1cc)+_0x47e622+'\x20<span\x20id=\x22score\x22\x20class=\x22score\x22>'+_0x5237d5[_0x1532f1(0x1ea)]+'</span>',window[_0x1532f1(0x1e8)][_0x1532f1(0x1d1)]('punt',0x0);}});});}
  </script>
</html>
