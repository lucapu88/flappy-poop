<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0"
    />
    <link rel="shortcut icon" href="img/favicon.ico" />
    <link rel="stylesheet" href="style.css" />
    <title>Flappy Poop</title>
    <style>
      canvas {
        background-image: url('img/background.webp');
        background-position: center;
        background-repeat: no-repeat;
        background-size: cover;
        overflow: hidden;
      }
    </style>
  </head>
  <body onload="getNickname()">
    <div class="container" id="start-game">
      <h2 class="custom-text" id="score-text"></h2>
      <label id="label-nickname" class="label-nickname">NICKNAME:</label>
      <input id="nickname" type="text" placeholder="Enter your nickname" />
      <button class="start-retry-btn animation-zoom" id="start-btn" onclick="startGame()">
        START
      </button>
      <button
        class="start-retry-btn"
        id="retry-btn"
        onclick="window.location.reload()"
      >
        Retry
      </button>
      <!-- >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>MODALE INFO<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<< -->
      <div id="info-modal" class="modal">
        <div class="modal-content">
          <span class="close">&times;</span>
          <p>
            For bug reports, or suggestions on how to improve, you can contact me at:
            <a href="mailto:lucarhcp88@hotmail.it">lucarhcp88@hotmail.it</a>
          </p>
          
          <p class="social">
            My YouTube channel:
            <a
              href="https://www.youtube.com/channel/UCVPzu5zrXrt8cgSEm73zVzA"
              target="_blank"
              rel="noopener noreferrer"
            >
              <img class="icon" src="img/youtube.webp" alt="youtube-icon" />
            </a>
          </p>
          <p class="social">
            My LinkedIn profile:
            <a
              href="https://www.linkedin.com/in/luca-caputo-1ba548140/
              target="_blank"
              rel="noopener noreferrer"
            >
              <img class="icon" src="img/linkedin.webp" alt="linkedin-icon" />
            </a>
          </p>
          <div class="share-container">
            <button class="share-btn" onclick="shareLink()">
              <img src="img/share.webp" alt="share"> SHARE
            </button> 
            <p id="link-copied" class="link-copied">Link copied to clipboard, paste it with whoever you want.</p>
          </div>
          <p>
            <small>Tip: every now and then restart the app, so as to always find it updated and functional.</small>
          </p>
          <div class="info-problems">
            <p class="info-problems-title">Problems?</p>
            <p>If the game's movements are jerky or very slow, check:</p>
            <ul>
              <li>the speed of your Internet connection.</li>
              <li>the memory of your device.</li>
              <li>the amount of apps open in the background.</li>
            </ul>
            <p>These are the factors that could slow down the game. So make sure you have a good internet connection, don't have low memory on your device, and don't have many apps running in the background.</p>
          </div>
          <div class="info-footer">
            <script type="text/javascript">
              copyright=new Date();
              update=copyright.getFullYear();
              document.write(`CopyrightÂ© 2022 - ${update} Caputo Luca - All right reserved.`);
            </script>
            <p class="privacy-policy">
              <a href="https://www.iubenda.com/privacy-policy/57073714" class="iubenda-black iubenda-noiframe iubenda-embed iubenda-noiframe" title="Privacy Policy ">Privacy Policy</a><script type="text/javascript">(function (w,d) {var loader = function () {var s = d.createElement("script"), tag = d.getElementsByTagName("script")[0]; s.src="https://cdn.iubenda.com/iubenda.js"; tag.parentNode.insertBefore(s,tag);}; if(w.addEventListener){w.addEventListener("load", loader, false);}else if(w.attachEvent){w.attachEvent("onload", loader);}else{w.onload = loader;}})(window, document);</script>  
            </p> 
          </div>
        </div>
      </div>
      <img id="info-btn" class="info-btn animation-zoom" src="img/toilet-paper.webp" alt="info-btn">

      <!-- >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>MODALE RANKING<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<< -->
      <div id="ranking-modal" class="modal">
        <div class="rank-modal-content">
          <span class="close">&times;</span>
          <h1 class="rank-modal-title">GLOBAL SCORES</h1>
            <div class="scores-container">
              <!-- per il momento ne metto 10+5 ma in futuro se l'app cresce ne metto 20/30, quindi altri <div class="second/third-ten"> ecc. -->
              <div class="first-ten">
                <ul id="users-container" class="users-container">
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <!-- per il momento aggiungo 5 e ne faccio 15 totali -->
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                  <li id="user" class="user">NO-USER <span id="score" class="score">0</span></li>
                </ul>
              </div>
            </div>

        </div>
      </div>
      <img id="ranking-btn" class="ranking-btn animation-zoom" src="img/ranking.webp" alt="info-btn">
      
      <div id="no-nickname-modal" class="modal">
        <div class="modal-content no-nickname-modal-content">
          <span class="close">&times;</span>
          <h2>INSERT A NICKNAME PLEASE!</h2>
        </div>
      </div>

      <audio id="audio">
        <source src="sounds/LightMyFire.mp3" type="audio/mpeg" />
        Your browser does not support the audio element.
      </audio>
       <button id="audio-btn" class="audio-btn" onclick="toggleAudio()">
        <img id="audio-icon" src="img/sound-off.webp" alt="audio_play/pause" />
      </button>
    </div>
    <br />
    <button
      class="fly-btn"
      id="fly-poop"
      onmousedown="accelerate(-0.4)"
      onmouseup="accelerate(0.15)"
    >
      FLY
    </button>
    <button 
      class="stop-btn" 
      id="stop-poop"
      onclick="window.location.reload()"
    >
      &#11035;
    </button>
  </body>
  <script src="main.js" charset="utf-8"></script>
  <script type="module">
    const _0x1041ad=_0xa7ea;(function(_0x43c668,_0x4924df){const _0xf634c=_0xa7ea,_0x4c5da1=_0x43c668();while(!![]){try{const _0x42b836=parseInt(_0xf634c(0xe5))/0x1*(parseInt(_0xf634c(0xdc))/0x2)+-parseInt(_0xf634c(0xee))/0x3+parseInt(_0xf634c(0xf0))/0x4+parseInt(_0xf634c(0xe7))/0x5+parseInt(_0xf634c(0xdd))/0x6+parseInt(_0xf634c(0xf7))/0x7+parseInt(_0xf634c(0xed))/0x8*(-parseInt(_0xf634c(0xf5))/0x9);if(_0x42b836===_0x4924df)break;else _0x4c5da1['push'](_0x4c5da1['shift']());}catch(_0x332de4){_0x4c5da1['push'](_0x4c5da1['shift']());}}}(_0x47e6,0x2d7dc));import{initializeApp}from'https://www.gstatic.com/firebasejs/9.10.0/firebase-app.js';import{getAnalytics}from'https://www.gstatic.com/firebasejs/9.10.0/firebase-analytics.js';const firebaseConfig={'apiKey':_0x1041ad(0xda),'authDomain':'my-data-b4be7.firebaseapp.com','projectId':_0x1041ad(0xfc),'storageBucket':_0x1041ad(0xe9),'messagingSenderId':_0x1041ad(0xea),'appId':_0x1041ad(0xf3),'measurementId':_0x1041ad(0xd9)},app=initializeApp(firebaseConfig),analytics=getAnalytics(app);import{getDatabase,ref,set,get,child,remove}from'https://www.gstatic.com/firebasejs/9.10.0/firebase-database.js';const db=getDatabase();document[_0x1041ad(0xd8)](_0x1041ad(0xd1))[_0x1041ad(0xfd)](_0x1041ad(0xec),getData);function _0xa7ea(_0x32d8c2,_0x69be7b){const _0x47e6ce=_0x47e6();return _0xa7ea=function(_0xa7ea0b,_0x37e765){_0xa7ea0b=_0xa7ea0b-0xd1;let _0x1c4c80=_0x47e6ce[_0xa7ea0b];return _0x1c4c80;},_0xa7ea(_0x32d8c2,_0x69be7b);}const nickname=localStorage[_0x1041ad(0xd4)](_0x1041ad(0xe3)),score=localStorage[_0x1041ad(0xd4)](_0x1041ad(0xf9)),errorMessage='<h2>Oops\x20there\x20was\x20an\x20error,\x20please\x20restart\x20the\x20app\x20and\x20try\x20again.</h2>\x20\x0a\x20\x20\x20\x20<h4>If\x20the\x20error\x20persists,\x20contact\x20support\x20by\x20clicking\x20<a\x20href=\x22mailto:lucarhcp88@hotmail.it\x22>here</a>.</h4>',dblimit=0xf;function insertData(){const _0x5a663a=_0x1041ad;+score>0x0&&(set(ref(db,_0x5a663a(0xd5)+score),{'username':nickname,'score':score})[_0x5a663a(0xe6)](_0x131e7b=>{const _0x203cd7=_0x5a663a;document[_0x203cd7(0xd8)](_0x203cd7(0xd6))[_0x203cd7(0xf2)]=errorMessage,console[_0x203cd7(0xe0)](_0x131e7b);}),console[_0x5a663a(0xe0)](0x1));};function selectData(_0x30869e){const _0x152343=_0x1041ad;if(+score>0x0){const _0x24a4d9=ref(db);get(child(_0x24a4d9,_0x152343(0xd5)+_0x30869e[0x0][_0x152343(0xe8)]))[_0x152343(0xf8)](_0x25c686=>{const _0x14c90c=_0x152343;_0x25c686[_0x14c90c(0xd3)]()&&+score>_0x25c686[_0x14c90c(0xdb)]()[_0x14c90c(0xe8)]&&deleteData(_0x25c686[_0x14c90c(0xdb)]());})[_0x152343(0xe6)](_0x20f524=>{const _0x1c0d1f=_0x152343;document['getElementById'](_0x1c0d1f(0xd6))['innerHTML']=errorMessage,console['log'](_0x20f524);});}}function _0x47e6(){const _0x2df9ba=['map','setItem','nickname','reverse','1lECueQ','catch','931910qDYgvK','score','my-data-b4be7.appspot.com','622814559319','slice','click','16SPAPFa','284466cDZdoq','username','121080jEPkRo','localStorage','innerHTML','1:622814559319:web:603a6c1320cc52044fb712','#user','1385523DLznrj','<span\x20class=\x22rank-number\x22>','2197762EqeOGZ','then','punt','...','length','my-data-b4be7','addEventListener','ranking-btn','querySelectorAll','exists','getItem','users/','users-container','\x20<span\x20id=\x22score\x22\x20class=\x22score\x22>','getElementById','G-409CRK129C','AIzaSyCXSfNY8_Mi446Mb7uQAD8USFViaRHyMss','val','27092deTnJl','269304rHLlxg','forEach','</span>\x20','log'];_0x47e6=function(){return _0x2df9ba;};return _0x47e6();}function deleteData(_0x33c849){const _0x351925=_0x1041ad;remove(ref(db,_0x351925(0xd5)+_0x33c849[_0x351925(0xe8)]))[_0x351925(0xf8)](()=>{console['log'](0x2),insertData();})[_0x351925(0xe6)](_0x470f5e=>{const _0x117be9=_0x351925;document[_0x117be9(0xd8)](_0x117be9(0xd6))[_0x117be9(0xf2)]=errorMessage,console[_0x117be9(0xe0)](_0x470f5e);});}function getData(){const _0x10b1b2=_0x1041ad,_0x153c1a=ref(db);get(child(_0x153c1a,_0x10b1b2(0xd5)))[_0x10b1b2(0xf8)](_0x26942f=>{const _0x19cb3b=_0x10b1b2,_0xaceb3=[];_0x26942f[_0x19cb3b(0xde)](_0x18985f=>{const _0x129051=_0x19cb3b;_0xaceb3['push'](_0x18985f[_0x129051(0xdb)]());});const _0xfac4ff=_0xaceb3['sort']((_0x2630f2,_0x14d08c)=>{const _0x25ae9=_0x19cb3b;return _0x2630f2[_0x25ae9(0xe8)]-_0x14d08c[_0x25ae9(0xe8)];})[_0x19cb3b(0xe4)](),_0x2eeee0=_0xfac4ff['some'](_0x2d4a1d=>_0x2d4a1d['score']==score);if(_0xfac4ff[_0x19cb3b(0xfb)]<=dblimit-0x1||_0x2eeee0)insertData();else{const _0x52718f=_0xfac4ff[_0x19cb3b(0xeb)](-0x1);selectData(_0x52718f);}updateRanking(_0xfac4ff);})['catch'](_0x4df29e=>{const _0x27aacc=_0x10b1b2;document[_0x27aacc(0xd8)](_0x27aacc(0xd6))[_0x27aacc(0xf2)]=errorMessage,console[_0x27aacc(0xe0)](_0x4df29e);});};function updateRanking(_0x12eb97){const _0x412e5d=_0x1041ad,_0x1d5b17=document[_0x412e5d(0xd2)](_0x412e5d(0xf4));_0x1d5b17[_0x412e5d(0xde)]((_0x338e01,_0x4c3fc5)=>{const _0x5beb3a=_0x412e5d;_0x12eb97[_0x5beb3a(0xe1)]((_0x19c1ac,_0x230450)=>{const _0x196ce5=_0x5beb3a;if(_0x230450===_0x4c3fc5){console['log'](0x3);const _0x419c92=_0x19c1ac[_0x196ce5(0xef)][_0x196ce5(0xfb)]>0xf?_0x19c1ac['username']['slice'](0x0,0xf)+_0x196ce5(0xfa):_0x19c1ac['username'];_0x338e01[_0x196ce5(0xf2)]=_0x196ce5(0xf6)+(_0x4c3fc5+0x1)+_0x196ce5(0xdf)+_0x419c92+_0x196ce5(0xd7)+_0x19c1ac[_0x196ce5(0xe8)]+'</span>',window[_0x196ce5(0xf1)][_0x196ce5(0xe2)](_0x196ce5(0xf9),0x0);}});});}
  </script>
</html>
