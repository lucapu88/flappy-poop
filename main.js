let gameCharacter,myScore,myScoreNumber,pingone,startScoreBasedDisplay,myObstacles=[],infoModal=document.getElementById("info-modal"),rankingModal=document.getElementById("ranking-modal"),insertNicknameModal=document.getElementById("no-nickname-modal"),infoBtn=document.getElementById("info-btn"),rankingBtn=document.getElementById("ranking-btn"),infoClose=document.getElementsByClassName("close")[0],rankingClose=document.getElementsByClassName("close")[1],insertNicknameClose=document.getElementsByClassName("close")[2],startBtn=document.getElementById("start-btn"),audioIconPlay=!1,noNickname=!1,iosDevice=!1;function startGame(){this.saveNickname(document.getElementById("nickname").value),soundFart(),noNickname&&(gameCharacter=new component(55,40,"",10,120,"img"),gameCharacter.gravity=.05,myScore=new component("30px","'Lucida Console', 'Courier New', monospace","#202020",20,30,"text"),document.getElementById("start-game").style.display="none",gameCharacter&&myGameArea.start())}function saveNickname(e){const t=e.trim();t?(window.localStorage.setItem("nickname",t),document.getElementById("nickname").style.display="none",noNickname=!0):(insertNicknameModal.style.display="block",noNickname=!1)}async function getNickname(){const e=await localStorage.getItem("nickname");e?document.getElementById("nickname").value=e:document.getElementById("nickname").placeholder="Enter your nickname",startScoreBasedDisplay=window.innerWidth>1600?800:400}function getIos(){const e=navigator.userAgent||navigator.vendor||window.opera;/iPad|iPhone|iPod/.test(e)&&!window.MSStream&&(iosDevice=!0)}getIos();let myGameArea={canvas:document.createElement("canvas"),start:function(){iosDevice?(this.canvas.width=750,this.canvas.height=415):(this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight<=1e3?window.innerHeight:1e3),this.context=this.canvas.getContext("2d"),document.body.insertBefore(this.canvas,document.body.childNodes[0]),this.frameNo=0,startInterval=setInterval(updateGameArea,20)},clear:function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}};function component(e,t,n,o,a,i){this.type=i,this.score=0,this.width=e,this.height=t,this.speedX=0,this.speedY=0,this.x=o,this.y=a,this.gravity=0,this.gravitySpeed=0,this.update=function(){if(ctx=myGameArea.context,"text"===this.type)ctx.font=this.width+" "+this.height,ctx.fillStyle=n,ctx.fillText(this.text,this.x,this.y);else if("img"===this.type){let n=new Image;n.src="img/flying_poop.webp",ctx.drawImage(n,this.x,this.y,e,t)}else ctx.fillStyle=n,ctx.beginPath(),roundRect(ctx,this.x,this.y,this.width,this.height,10,!0),ctx.fill()},this.newPos=function(){this.gravitySpeed+=this.gravity,this.x+=this.speedX,this.y+=this.speedY+this.gravitySpeed,this.hitBottom(),this.hitTop()},this.hitBottom=function(){let e=myGameArea.canvas.height-this.height;this.y>e&&(this.y=e,this.gravitySpeed=0)},this.hitTop=function(){let e=myGameArea.canvas.height-this.height;this.y<0&&(this.y=e,this.gravitySpeed=0)},this.crashWith=function(e){let t=this.x,n=this.x+this.width-4,o=this.y+10,a=this.y+this.height-4,i=e.x,s=e.x+e.width,r=e.y,c=e.y+e.height,l=!0;return(a<r||o>c||n<i||t>s)&&(l=!1),l?gameOver():(document.getElementById("start-game").style.display="none",document.getElementById("retry-btn").style.display="none"),l}}function roundRect(e,t,n,o,a,i=5,s=!1,r=!0){i="number"==typeof i?{tl:i,tr:i,br:i,bl:i}:{tl:0,tr:0,br:0,bl:0,...i},e.beginPath(),e.moveTo(t+i.tl,n),e.lineTo(t+o-i.tr,n),e.quadraticCurveTo(t+o,n,t+o,n+i.tr),e.lineTo(t+o,n+a-i.br),e.quadraticCurveTo(t+o,n+a,t+o-i.br,n+a),e.lineTo(t+i.bl,n+a),e.quadraticCurveTo(t,n+a,t,n+a-i.bl),e.lineTo(t,n+i.tl),e.quadraticCurveTo(t,n,t+i.tl,n),e.closePath(),s&&e.fill(),r&&e.stroke()}const randomIntForIncreaseSpeed=Math.floor(1851*Math.random()+2200),randomIntForChangeAsshole=Math.floor(1001*Math.random()+6e3);function updateGameArea(){let e,t,n,o,a,s,r,c=this.myScoreNumber<randomIntForIncreaseSpeed?-1.8:-3.8,l=-1.8===c?150:95,d=150===l?120:85;for(i=0;i<myObstacles.length;i+=1)if(gameCharacter.crashWith(myObstacles[i]))return;if(myGameArea.clear(),myGameArea.frameNo+=1,1==myGameArea.frameNo||everyinterval(l)){e=myGameArea.canvas.width,o=20,a=270,t=Math.floor(251*Math.random()+20),s=60,r=d;const i=this.myScoreNumber>randomIntForChangeAsshole,c=i?75:45,l=i?"#744009":"#964E00",m=i?"#451b00":"#6A2800";audioIconPlay&&(this.myScoreNumber>randomIntForIncreaseSpeed&&this.myScoreNumber<randomIntForIncreaseSpeed+150&&playAudio("scoreGoesUpLot"),this.myScoreNumber>randomIntForChangeAsshole&&this.myScoreNumber<randomIntForChangeAsshole+150&&playAudio("scoreCrazyLevels")),n=Math.floor(Math.random()*(r-60+1)+60),myObstacles.push(new component(c,t,l,e,0)),myObstacles.push(new component(c,e-t-n,m,e,t+n))}for(i=0;i<myObstacles.length;i+=1)myObstacles[i].x+=c,myObstacles[i].update();gameCharacter.newPos(),gameCharacter.update(),this.addScore(),myScore.update()}function playAudio(e){if(audioIconPlay)switch(e){case"gameOver":audio.loop=!1,audio.pause(),audio.currentTime=0,audio.src="sounds/toilet.mp3",audio.volume=1,audio.play();break;case"scoreGoesUpLot":let e=new Audio;e.src="sounds/oh-my-god.mp3",e.play(),audio.src="sounds/MasterOfPuppets.mp3",audio.volume=.5,audio.play();break;case"scoreCrazyLevels":let t=new Audio;t.src="sounds/oh-shit.mp3",t.play(),audio.src="sounds/BYOB.mp3",audio.volume=.55,audio.play()}}function everyinterval(e){return myGameArea.frameNo/e%1==0}function accelerate(e){return gameCharacter.gravity=e}function soundFart(){let e=new Audio;e.src="sounds/fart.mp3",audioIconPlay&&e.play()}function shareLink(){const e="https://play.google.com/store/apps/details?id=io.kodular.caputoluca88.Shopping_List",t=document.getElementById("link-copied");navigator.clipboard.writeText(e),document.addEventListener("copy",(function(t){t.clipboardData.setData("text/plain",e),t.preventDefault()})),document.execCommand("copy"),t.style.display="block",setTimeout((()=>t.style.display="none"),4500),soundFart()}const flyPoop=document.getElementById("fly-poop");flyPoop.addEventListener("touchstart",(function(e){e.preventDefault(),accelerate(-.4),flyPoop.style.boxShadow="0px 0px 35px 6px #000000"}),!1),flyPoop.addEventListener("touchend",(function(e){e.preventDefault(),accelerate(.15),flyPoop.style.boxShadow="none"}),!1),[infoBtn,infoClose,rankingBtn,rankingClose,startBtn].forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),soundFart()}),!1)}));const copyright=()=>{const e=(new Date).getFullYear();document.getElementById("copyright").innerText=`CopyrightÂ© 2022 - ${e} Caputo Luca - All right reserved.`};function toggleAudio(){const e=document.getElementById("audio-icon");audio.autoplay=!0,audio.loop=!0,audioIconPlay=!audioIconPlay,audioIconPlay?(e.src="img/sound-on.webp",audio.volume=.65,audio.play()):(e.src="img/sound-off.webp",audio.pause())}function _0xcc35(e,t){const n=_0x291f();return(_0xcc35=function(e,t){return n[e-=317]})(e,t)}function addScore(){const e=_0xcc35,t=myGameArea[e(328)]-startScoreBasedDisplay,n=Math[e(320)](t);this[e(330)]=n,pingone=n,myScore[e(319)]=e(327)+(n<0?0:n)}function _0x291f(){const e=["49294DqhDKM","myScoreNumber","324848sGIkdw","24VXAEWk","1154553tkTuPK","text","ceil","816036xDvJce","1291500gqFRED","6310pTWzyR","5121rSAEzc","112YRImlE","28556mIXnWG","SCORE: ","frameNo"];return(_0x291f=function(){return e})()}function _0x3e80(e,t){const n=_0x4cf8();return(_0x3e80=function(e,t){return n[e-=141]})(e,t)}infoBtn.onclick=function(){soundFart(),copyright(),infoModal.style.display="block"},infoClose.onclick=function(){soundFart(),infoModal.style.display="none"},rankingBtn.onclick=function(){soundFart(),rankingModal.style.display="block"},rankingClose.onclick=function(){soundFart(),rankingModal.style.display="none"},insertNicknameClose.onclick=function(){insertNicknameModal.style.display="none"},window.onclick=function(e){e.target==infoModal&&(infoModal.style.display="none"),e.target==rankingModal&&(rankingModal.style.display="none"),e.target==insertNicknameModal&&(insertNicknameModal.style.display="none")},function(e,t){const n=_0xcc35,o=_0x291f();for(;;)try{if(257246===-parseInt(n(326))/1*(parseInt(n(317))/2)+parseInt(n(318))/3+parseInt(n(331))/4+parseInt(n(322))/5+parseInt(n(321))/6+-parseInt(n(329))/7*(-parseInt(n(325))/8)+-parseInt(n(324))/9*(parseInt(n(323))/10))break;o.push(o.shift())}catch(e){o.push(o.shift())}}(),function(e,t){const n=_0x3e80,o=_0x4cf8();for(;;)try{if(715574===-parseInt(n(153))/1+parseInt(n(145))/2*(parseInt(n(167))/3)+parseInt(n(149))/4*(parseInt(n(170))/5)+parseInt(n(156))/6*(parseInt(n(162))/7)+parseInt(n(144))/8*(parseInt(n(142))/9)+-parseInt(n(154))/10+-parseInt(n(159))/11)break;o.push(o.shift())}catch(e){o.push(o.shift())}}();const gameOver=()=>{const e=_0x3e80;window[e(158)][e(164)](e(168),pingone),document.getElementById(e(160)).style[e(146)]=e(169),clearInterval(startInterval),document.getElementById("start-game").style.backgroundImage=e(166),document[e(150)]("start-game")[e(163)][e(155)]=e(152),document.getElementById(e(147)).style.display="none",document[e(150)](e(157)).style[e(155)]=e(161),document.getElementById(e(165))[e(163)][e(155)]=e(161),document[e(150)]("score-text").innerText=myScore[e(148)],infoBtn.style[e(155)]=e(161),rankingBtn[e(163)][e(155)]=e(161),document.body.style[e(151)]="hidden",document[e(150)]("retry-btn")[e(163)][e(155)]=e(141),playAudio(e(143))};function _0x4cf8(){const e=["getElementById","overflow","flex","417788OLwxLd","3882460ePjfWQ","display","12SoLUYA","label-nickname","localStorage","3750285BylVuY","start-game","none","24927WVlxxc","style","setItem","audio-btn","url('img/game-over.webp')","3yrrRmQ","pingone","#e26b6d","3509740AldAQX","block","153QhAlRr","gameOver","357488CZVtSl","787622MJXVeD","backgroundColor","start-btn","text","4tIkivp"];return(_0x4cf8=function(){return e})()}